(this.webpackJsonpcovid_slots=this.webpackJsonpcovid_slots||[]).push([[0],{139:function(e,t,c){},142:function(e,t){},144:function(e,t){},151:function(e,t,c){},152:function(e,t,c){},160:function(e,t){},162:function(e,t){},189:function(e,t){},191:function(e,t){},192:function(e,t){},197:function(e,t){},199:function(e,t){},218:function(e,t){},230:function(e,t){},233:function(e,t){},263:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(132),s=c.n(i),l=(c(139),c(20)),r=c(50),o=c(5),j=c(42),d=c(6),b=c(32),u=c.n(b),h=c(18),O=c.n(h),v=c(0),f=function(e){return Object(v.jsxs)("div",{className:"row border-line",children:[Object(v.jsx)("div",{className:"updated-time",children:O()().format("HH:MM:SS")}),Object(v.jsxs)("div",{className:"column",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{children:e.date}),Object(v.jsx)("div",{children:e.vaccine}),Object(v.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{children:e.name}),Object(v.jsx)("div",{children:e.pincode}),Object(v.jsx)("div",{children:e.district_name})]})]})]})};var x=function(e){var t=e.loading,c=e.slotsList18,n=e.slotsList45,a=e.availableSlots18,i=e.availableSlots45,s=e.age;return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:45===s?"column-reverse":"column"},children:[Object(v.jsxs)("div",{className:"App-header",children:[Object(v.jsxs)("div",{className:"available-container",children:[Object(v.jsx)("h2",{className:"title",children:"Slots Available (18+)"}),0===a.length?Object(v.jsx)("div",{className:"loader",children:"No slots available"}):Object(v.jsx)("div",{children:a.map(f)})]}),Object(v.jsxs)("div",{className:"all-centers-container",children:[Object(v.jsx)("h2",{className:"title",children:"Centers (18+)"}),t?Object(v.jsx)("div",{className:"loader",children:"Fetching data..."}):0===c.length?Object(v.jsx)("div",{className:"loader",children:"No Centers available"}):Object(v.jsx)("div",{children:c.map(f)})]})]}),Object(v.jsxs)("div",{className:"App-header",children:[Object(v.jsxs)("div",{className:"available-container",children:[Object(v.jsx)("h2",{className:"title",children:"Slots Available (45+)"}),0===i.length?Object(v.jsx)("div",{className:"loader",children:"No slots available"}):Object(v.jsx)("div",{children:i.map(f)})]}),Object(v.jsxs)("div",{className:"all-centers-container",children:[Object(v.jsx)("h2",{className:"title",children:"Centers (45+)"}),t?Object(v.jsx)("div",{className:"loader",children:"Fetching data..."}):0===n.length?Object(v.jsx)("div",{className:"loader",children:"No Centers available"}):Object(v.jsx)("div",{children:n.map(f)})]})]})]})},m=c(134),p=c(51);c(151);var g=function(e){var t=e.className,c=void 0===t?"":t,n=e.varient,a=void 0===n?"regular":n,i=e.children,s=e.label,o=Object(r.a)(e,["className","varient","children","label"]);return Object(v.jsx)("button",Object(l.a)(Object(l.a)({class:"button -".concat(a," center ").concat(c)},o),{},{children:i||s}))},N=function(e){return Object(v.jsxs)("div",{className:"row border-line",children:[Object(v.jsx)("div",{className:"updated-time",children:O()().format("HH:MM:SS")}),Object(v.jsxs)("div",{className:"column",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{children:e.date}),Object(v.jsx)("div",{children:e.vaccine}),Object(v.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{children:e.name}),Object(v.jsx)("div",{children:e.pincode}),Object(v.jsx)("div",{children:e.district_name})]})]})]})},S=function(e){var t=u.a.getVoiceByName("Alex");new u.a({voice:t,pitch:1,rate:1}).write(e)};var y=function(e){var t=e.availableSlots18,c=e.availableSlots45,a=e.token,i=e.setToken,s=e.age,l=Object(n.useState)([]),r=Object(o.a)(l,2),j=r[0],d=r[1],b=Object(n.useState)([]),u=Object(o.a)(b,2),h=u[0],f=u[1],x=Object(n.useState)(!1),y=Object(o.a)(x,2),k=y[0],_=y[1],w=Object(n.useState)(!1),C=Object(o.a)(w,2),I=(C[0],C[1]),A=Object(n.useState)(null),L=Object(o.a)(A,2),E=(L[0],L[1]),Y=Object(n.useState)(null),T=Object(o.a)(Y,2),B=T[0],M=T[1],D=Object(n.useState)(""),H=Object(o.a)(D,2),P=H[0],V=H[1],F=Object(n.useState)({}),J=Object(o.a)(F,2),z=J[0],R=J[1],U=Object(n.useState)(!1),X=Object(o.a)(U,2),q=X[0],G=X[1],K=Object(n.useState)([]),Q=Object(o.a)(K,2),W=Q[0],Z=Q[1];Object(n.useEffect)((function(){ee();var e=setInterval((function(){ee()}),6e5);return function(){clearTimeout(e)}}),[]),Object(n.useEffect)((function(){f([]),_(!1)}),[s]),Object(n.useEffect)((function(){18===s&&Z(t),45===s&&Z(c)}),[t,c]),Object(n.useEffect)((function(){if(W.length>0&&h.length&&k){var e=!1;W.forEach((function(t){t.available_capacity>=h.length&&!e&&!q&&(e=!0,R(t),$(t),G(!0))}))}}),[W]),Object(n.useEffect)((function(){ee()}),[a]);var $=function(){fetch("https://cdn-api.co-vin.in/api/v2/auth/getRecaptcha",{headers:{authorization:"Bearer "+a},mode:"cors",method:"POST"}).then((function(e){return e.json()})).then((function(e){if(e.captcha){var t=e.captcha.replace(/\\/gi);document.querySelector(".captcha-svg").innerHTML=t}})).catch((function(e){console.log(e)}))},ee=function(){a&&fetch("https://cdn-api.co-vin.in/api/v2/appointment/beneficiaries",{headers:{authorization:"Bearer "+a}}).then((function(e){return e.json()})).then((function(e){M(null),d(e.beneficiaries)})).catch((function(e){console.log(e),i(null),S("Session expired")}))},te=function(e){if(a||0!==h.length){var t=O()().format("DD-MM-YYYY"),c=O()(t).isSame(e.date,"day"),n=0;c&&(n=function(){var e=parseInt(O()().format("HH")),t=0;return e<=7?t=0:e<=9?t=1:e<=11?t=2:e<=12&&(t=3),t}()),I(!0),fetch("https://cdn-api.co-vin.in/api/v2/appointment/schedule",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+a},mode:"cors",body:JSON.stringify({dose:1,session_id:e.session_id,center_id:e.center_id,slot:e.slots[n],beneficiaries:h,captcha:P})}).then((function(e){return e.json()})).then((function(t){t.error?("Please enter valid security code"===t.error&&($(),V("")),S(t.error||"Oops! Something went wrong. Please try again."),M({type:"error",msg:t.error})):(E(t),f([]),M({type:"success",msg:"Your booking is successfully completed"}),S("Your booking is successfully completed for "+e.date+" on "+e.slots[n]),document.querySelector(".captcha-svg").innerHTML="",V(""))})).catch((function(e){return console.log(e)})).finally((function(){M({type:"error",msg:"Oops!! Something went wrong please try again"}),V(""),I(!1),ee(),_(!1),G(!1)}))}},ce=function(e){0!==h.length?_(e):_(!1)};return Object(v.jsxs)(v.Fragment,{children:[B&&Object(v.jsx)("div",{className:"banner ".concat(B.type),children:B.msg}),Object(v.jsxs)("div",{className:"App-header",children:[Object(v.jsxs)("div",{className:"available-container",children:[Object(v.jsxs)("h2",{className:"title",children:["Slots Available (",s,"+)"]}),0===W.length?Object(v.jsx)("div",{className:"loader",children:"No slots available"}):Object(v.jsx)("div",{children:W.map(N)})]}),Object(v.jsxs)("div",{className:"all-centers-container",children:[Object(v.jsx)("h2",{className:"title",children:"Beneficiary Details"}),a?Object(v.jsxs)("div",{style:{padding:10},children:[Object(v.jsxs)("div",{children:[h.length," Selected"," "]}),j.map((function(e){var t=parseInt(O()().format("YYYY"))-parseInt(e.birth_year);return 18===s&&t>=45||45===s&&t<45?null:Object(v.jsxs)("div",{className:"row border-line be-info",children:[Object(v.jsx)("div",{children:Object(v.jsx)("input",{disabled:k,type:"checkbox",onChange:function(t){return function(e,t){var c=Object(p.a)(h);e.target.checked?(c.push(t.beneficiary_reference_id),c=Object(p.a)(Object(m.a)(Array,Object(p.a)(new Set(c))))):c=c.filter((function(e){return t.beneficiary_reference_id!==e})),f(c)}(t,e)},checked:-1!==h.indexOf(e.beneficiary_reference_id)})}),Object(v.jsx)("div",{children:e.name}),Object(v.jsx)("div",{children:t}),Object(v.jsxs)("div",{children:[e.appointments.length," ","appointments"]})]})})),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(g,{label:"Auto Book",onClick:function(){ce(!0)}}),Object(v.jsx)(g,{label:"cancel",onClick:function(){ce(!1)}})]}),Object(v.jsx)("div",{children:k?"Please wait until automatic booking complete.":"Please select Beneficiary's and click on schedule"}),Object(v.jsxs)("div",{className:"captcha",children:[Object(v.jsx)("div",{className:"input-label black",children:"Enter captcha ones you receive it"}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"captcha-svg"}),Object(v.jsx)("input",{onChange:function(e){V(e.target.value)},value:P}),Object(v.jsx)(g,{label:"Submit & book now",onClick:function(){te(z)}})]})]})]}):Object(v.jsx)("div",{className:"loader error",children:"Please Login"})]})]})]})};c(152);var k=function(e){var t=e.token,c=e.setDistrictId,a=Object(n.useState)(16),i=Object(o.a)(a,2),s=i[0],l=i[1],r=Object(n.useState)(null),j=Object(o.a)(r,2),d=j[0],b=j[1],u=Object(n.useState)([]),h=Object(o.a)(u,2),O=h[0],f=h[1],x=Object(n.useState)([]),m=Object(o.a)(x,2),p=m[0],g=m[1];Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){S()}),[s]),Object(n.useEffect)((function(){d?c(d):(l(16),b(194))}),[d]);var N=function(){fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){return e.json()})).then((function(e){e.states&&(f(e.states),16!==s||d||b(294))})).catch((function(e){return console.log(e)}))},S=function(){s&&fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+s,{headers:{"content-type":"application/json",Authorization:"Bearer "+t},mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.districts&&(g(e.districts),b(16!==s||d?e.districts[0].district_id:294))})).catch((function(e){return console.log(e)}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:Object(v.jsx)("select",{value:s,onChange:function(e){return l(e.target.value)},children:O.map((function(e){return Object(v.jsx)("option",{value:e.state_id,children:e.state_name})}))})}),Object(v.jsx)("div",{children:Object(v.jsx)("select",{value:d,onChange:function(e){b(e.target.value)},children:p.map((function(e){return Object(v.jsx)("option",{value:e.district_id,children:e.district_name})}))})})]})},_=c(78),w=c.n(_);var C=function(e){var t=e.setToken,c=Object(n.useState)(null),a=Object(o.a)(c,2),i=a[0],s=a[1],r=Object(n.useState)(null),j=Object(o.a)(r,2),d=j[0],b=j[1],u=Object(n.useState)({}),h=Object(o.a)(u,2),O=h[0],f=h[1];return Object(v.jsxs)("div",{children:[!O.txnId&&Object(v.jsxs)("div",{className:"row login",children:[Object(v.jsx)("div",{className:"input-label black",children:"Mobile No. "}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"tel",value:i,name:"mobile",onChange:function(e){return s(e.target.value)}})}),Object(v.jsx)("div",{children:Object(v.jsx)(g,{label:"Submit",onClick:function(){i&&fetch("https://cdn-api.co-vin.in/api/v2/auth/generateMobileOTP",{body:JSON.stringify({mobile:i,secret:"U2FsdGVkX1/3I5UgN1RozGJtexc1kfsaCKPadSux9LY+cVUADlIDuKn0wCN+Y8iB4ceu6gFxNQ5cCfjm1BsmRQ=="}),headers:{"content-type":"application/json"},method:"POST",mode:"cors",credentials:"omit"}).then((function(e){return e.json()})).then((function(e){f({txnId:e.txnId})})).catch((function(e){return console.log(e)}))}})})]}),O.txnId&&Object(v.jsxs)("div",{className:"row otp",children:[Object(v.jsx)("div",{className:"input-label black",children:"Enter OTP "}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"number",value:d,name:"mobile",onChange:function(e){return b(e.target.value)}})}),Object(v.jsx)("div",{children:Object(v.jsx)(g,{label:"Submit",onClick:function(){return function(){if(d){var e=w.a.SHA256(d).toString(w.a.enc.Hex);fetch("https://cdn-api.co-vin.in/api/v2/auth/validateMobileOtp",{body:JSON.stringify({otp:e,txnId:O.txnId}),headers:{"content-type":"application/json"},method:"POST",mode:"cors",credentials:"omit"}).then((function(e){return e.json()})).then((function(e){f(Object(l.a)(Object(l.a)({},O),{},{token:e.token})),t&&t(e.token)})).catch((function(e){return console.log(e)}))}}()}})})]})]})};var I=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(!0),s=Object(o.a)(i,2),b=s[0],h=s[1],f=Object(n.useState)([]),m=Object(o.a)(f,2),p=m[0],N=m[1],S=Object(n.useState)([]),_=Object(o.a)(S,2),w=_[0],I=_[1],A=Object(n.useState)([]),L=Object(o.a)(A,2),E=L[0],Y=L[1],T=Object(n.useState)([]),B=Object(o.a)(T,2),M=B[0],D=B[1],H=Object(n.useState)(!0),P=Object(o.a)(H,2),V=P[0],F=P[1],J=Object(n.useState)(!1),z=Object(o.a)(J,2),R=z[0],U=z[1],X=Object(n.useState)(294),q=Object(o.a)(X,2),G=q[0],K=q[1],Q=Object(n.useState)("ALL"),W=Object(o.a)(Q,2),Z=W[0],$=W[1],ee=Object(n.useState)(18),te=Object(o.a)(ee,2),ce=te[0],ne=te[1];Object(n.useEffect)((function(){18===ce&&(F(!0),U(!1)),45===ce&&(F(!1),U(!0))}),[ce]);var ae=function(){h(!0);var e=O()().format("DD-MM-YYYY"),t="https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict";t+="?district_id="+G+"&date="+e,"ALL"!==Z&&(t+="&vaccine="+Z),fetch(t).then((function(e){return e.json()})).then((function(e){var t=[],c=[],n=[],a=[];e.centers.forEach((function(e){var i=e.sessions,s=Object(r.a)(e,["sessions"]);i.forEach((function(e){var i=e.min_age_limit,r=e.available_capacity,o=Object(l.a)(Object(l.a)({},s),e);i<45?(t.push(o),r>0&&c.push(o)):(n.push(o),r>0&&a.push(o))}))})),N(t),I(c),Y(n),D(a)})).catch((function(e){return console.log(e)})).finally((function(){return h(!1)}))};Object(n.useEffect)((function(){w.length>0&&V&&ie("18+")}),[w]),Object(n.useEffect)((function(){M.length>0&&R&&ie("45+")}),[M]),Object(n.useEffect)((function(){try{var e=sessionStorage.getItem("token");a(e)}catch(c){console.log(c)}ae();var t=setInterval((function(){return ae()}),2e3);return function(){clearTimeout(t)}}),[G,Z]);var ie=function(e){var t=u.a.getVoiceByName("Alex");new u.a({voice:t,pitch:1,rate:1}).write("Covid vaccines are available for "+e)},se=function(e){a(e),sessionStorage.setItem("token",e)};return Object(v.jsx)(j.a,{children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("header",{children:[Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{className:"nav-area",children:[Object(v.jsx)("li",{children:Object(v.jsx)(j.b,{to:"/",children:"Home"})}),Object(v.jsx)("li",{children:Object(v.jsx)(j.b,{to:"/slots_available",children:"Slots available"})}),Object(v.jsx)("li",{children:Object(v.jsx)(j.b,{to:"/automatic_booking",children:"Booking"})})]})}),Object(v.jsx)("div",{children:!c&&Object(v.jsx)(C,{setToken:se})}),Object(v.jsxs)("div",{className:"volume-controll",children:[Object(v.jsxs)(g,{onClick:function(){return F(!V)},className:"icon-button",children:[Object(v.jsx)("span",{children:"18+"}),Object(v.jsx)("i",{className:"fa fa-volume-".concat(V?"up":"off")})]}),Object(v.jsxs)(g,{onClick:function(){return U(!R)},className:"icon-button",children:[Object(v.jsx)("span",{children:"45+"}),Object(v.jsx)("i",{className:"fa fa-volume-".concat(R?"up":"off")})]})]})]}),Object(v.jsxs)("div",{className:"row header-baner",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(k,{token:c,setDistrictId:K}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{className:"input-label",children:"Vaccine Type"}),Object(v.jsxs)("select",{value:Z,onChange:function(e){return $(e.target.value)},children:[Object(v.jsx)("option",{value:"ALL",children:"ALL"}),Object(v.jsx)("option",{value:"COVAXIN",children:"COVAXIN"}),Object(v.jsx)("option",{value:"COVISHIELD",children:"COVISHIELD"})]})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{className:"input-label",children:"Age Limit"}),Object(v.jsxs)("select",{value:ce,onChange:function(e){return ne(parseInt(e.target.value))},children:[Object(v.jsx)("option",{value:18,children:"18+"}),Object(v.jsx)("option",{value:45,children:"45+"})]})]}),Object(v.jsxs)("div",{className:"row right-align my-info",children:["@ Praveen Reddy Reddivari | praveen.reddivari@gmail.com",Object(v.jsxs)("div",{className:"contact-icons",children:[Object(v.jsx)("a",{href:"https://www.linkedin.com/in/praveen-reddy-b8481b77/",target:"_blank",class:"fa fa-linkedin"}),Object(v.jsx)("a",{href:"https://www.facebook.com/praveen.reddivari",target:"_blank",class:"fa fa-facebook"}),Object(v.jsx)("a",{href:"https://twitter.com/reddivari_9",target:"_blank",class:"fa fa-twitter"})]})]})]}),Object(v.jsxs)(d.c,{children:[Object(v.jsx)(d.a,{path:"/slots_available",children:Object(v.jsx)(x,{age:ce,loading:b,slotsList18:p,slotsList45:E,availableSlots18:w,availableSlots45:M})}),Object(v.jsx)(d.a,{path:"/automatic_booking",children:Object(v.jsx)(y,{age:ce,availableSlots18:w,availableSlots45:M,token:c,setToken:se})}),Object(v.jsx)(d.a,{path:"/",children:Object(v.jsx)(x,{age:ce,loading:b,slotsList18:p,slotsList45:E,availableSlots18:w,availableSlots45:M})})]})]})})};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.a777578d.chunk.js.map